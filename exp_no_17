import cv2
import numpy as np
import matplotlib.pyplot as plt
from google.colab import files

# Upload image
uploaded = files.upload()
image_path = list(uploaded.keys())[0]

# Read image in grayscale
img = cv2.imread(image_path, 0)

# Define 8-neighbour Laplacian kernel
kernel = np.array([[-1, -1, -1],
                   [-1,  8, -1],
                   [-1, -1, -1]])

# Apply Laplacian filter
laplacian = cv2.filter2D(img, cv2.CV_64F, kernel)

# Sharpened image (subtract Laplacian)
sharpened = img - laplacian

# Convert to uint8
sharpened = np.clip(sharpened, 0, 255).astype(np.uint8)

# Display results
plt.figure(figsize=(12,4))

plt.subplot(1,3,1)
plt.imshow(img, cmap='gray')
plt.title("Original Image")
plt.axis("off")

plt.subplot(1,3,2)
plt.imshow(laplacian, cmap='gray')
plt.title("Laplacian (8-Neighbour)")
plt.axis("off")

plt.subplot(1,3,3)
plt.imshow(sharpened, cmap='gray')
plt.title("Sharpened Image")
plt.axis("off")

plt.show()
